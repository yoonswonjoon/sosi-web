<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>소시 - 프로필 확인</title>
    <style>
        body { font-family: sans-serif; background-color: #F9F7F4; color: #4A342E; margin: 0; }
        .container { padding: 20.dp; display: flex; flex-direction: column; align-items: center; }
        .card { background: white; border-radius: 16px; padding: 24px; width: 90%; max-width: 400px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); margin-top: 50px; }
        .btn-rose { background-color: #FF6B6B; color: white; border: none; padding: 12px; border-radius: 12px; width: 100%; font-weight: bold; cursor: pointer; }
        input { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        .error-text { color: #FF6B6B; font-size: 12px; display: none; }
        #profile-content { display: none; } /* 처음엔 숨김 */
    </style>
</head>
<body>

    <div id="password-section" class="container">
        <div class="card">
            <h2 style="text-align:center">비밀번호 확인</h2>
            <p style="color:gray; font-size:14px; text-align:center">이 프로필은 비밀번호로 보호되어 있습니다.</p>
            <input type="password" id="pw-input" placeholder="비밀번호를 입력하세요">
            <p id="pw-error" class="error-text">비밀번호가 일치하지 않습니다.</p>
            <button class="btn-rose" onclick="checkPassword()">확인</button>
        </div>
    </div>

    <div id="profile-content" class="container">
        <div class="card">
            <h1 id="user-nickname"></h1>
            <p id="user-intro"></p>
            <hr>
            <button class="btn-rose" onclick="openStore()">소시 앱에서 더 자세히 보기</button>
        </div>
    </div>

    <script>
        // 현재 URL에서 link_fid 추출
        const params = new URLSearchParams(window.location.search);
        // 실제 운영시는 https://sosi.app/p/FID 형태이므로 파싱 로직이 필요함
        const linkFid = window.location.pathname.split('/').pop();

        async function checkPassword() {
            const input = document.getElementById('pw-input').value;
            const errorText = document.getElementById('pw-error');

            // TODO: 여기서 Firebase 연동하여 실제 비밀번호와 비교
            // 지금은 임시로 '1234'라고 가정
            if (input === "1234") {
                document.getElementById('password-section').style.display = 'none';
                document.getElementById('profile-content').style.display = 'block';
                loadProfileData();
            } else {
                errorText.style.display = 'block';
            }
        }

        function loadProfileData() {
            // 여기에 API나 Firebase에서 가져온 데이터를 채워넣음
            document.getElementById('user-nickname').innerText = "지은";
            document.getElementById('user-intro').innerText = "반가워요! 운동과 여행을 좋아해요.";
        }

        function openStore() {
            // 앱이 있으면 실행, 없으면 마켓으로
            window.location.href = `intent://sosi.app/p/${linkFid}#Intent;scheme=https;package=com.vlm.sosi;end`;
        }
    </script>
</body>
</html>
